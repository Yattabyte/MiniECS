<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MiniECS: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MiniECS
   &#160;<span id="projectnumber">0.4.4</span>
   </div>
   <div id="projectbrief">A set of simple Entity, Component, and Systems (ECS) classes for use in games and other software.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">MiniECS Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://travis-ci.com/Yattabyte/MiniECS"><img src="https://img.shields.io/travis/yattabyte/MiniECS?label=Linux%20Build&logo=Travis" alt="Linux" class="inline"/>
</a> <a href="https://ci.appveyor.com/project/Yattabyte/MiniECS"><img src="https://img.shields.io/appveyor/ci/yattabyte/MiniECS?label=Windows%20Build&logo=Appveyor" alt="Windows" class="inline"/>
</a> <a href="https://www.codefactor.io/repository/github/yattabyte/MiniECS"><img src="https://img.shields.io/codefactor/grade/github/yattabyte/MiniECS?label=Code%20Factor&logo=CodeFactor" alt="CodeFactor" class="inline"/>
</a> <a href="https://www.codacy.com/manual/Yattabyte/MiniECS"><img src="https://img.shields.io/codacy/grade/d0765b60df194784986b2937b84ab526?label=Code%20Quality&logo=Codacy" alt="Codacy" class="inline"/>
</a> <a href="https://lgtm.com/projects/g/Yattabyte/MiniECS"><img src="https://img.shields.io/lgtm/grade/cpp/github/Yattabyte/MiniECS?label=Code%20Quality&logo=LGTM" alt="LGTM" class="inline"/>
</a> <a href="https://codedocs.xyz/Yattabyte/MiniECS"><object type="image/svg+xml" data="https://codedocs.xyz/Yattabyte/MiniECS.svg" alt="CodeDocs"></object>
/>
</a> <a href="http://clayallsopp.github.io/readme-score/?url=https://github.com/Yattabyte/MiniECS"><img src="http://readme-score-api.herokuapp.com/score.svg?url=https://github.com/yattabyte/miniecs" alt="Readme Score" class="inline"/>
</a> <a href="https://github.com/Yattabyte/MiniECS/blob/master/LICENSE"><img src="https://img.shields.io/github/license/Yattabyte/MiniECS?label=License&logo=github" alt="license" class="inline"/>
</a></p>
<h1>MiniECS</h1>
<p>This library aims to provide a reasonable basic level of Entity, Component, and Systems <em><b>(ECS)</b></em> functionality.</p>
<p>ECS refers to an architecture where specific <em>Systems</em> operate on a collection of <em>Entities</em>, filtered to match only the <em>Component types</em> the <em>System</em> cares about.</p>
<p>In a high-level sense, this transforms a potentially narly-looking inheritance structure down into a <em>Database-like</em> structure.</p>
<p>In this library, entities and components are stored in a collection referred to as an <em><b>ecsWorld</b></em>, allowing run-time manipulation and access.</p>
<p>Requires C++17 and CMake.</p>
<p>Compiles on GCC 8/9, Clang 7/8/9, MSVC 14/19 (VS 2017/2019).</p>
<p>Across this library and other of my "Mini" libraries, the namespace "mini" must be used.</p>
<h2>Overview</h2>
<p>This library exposes the following structures to the user:</p><ul>
<li>ecsComponent</li>
<li>ecsEntity</li>
<li>ecsHandle</li>
<li>ecsSystem</li>
<li>ecsWorld</li>
</ul>
<h3>Section 1: ecsComponent</h3>
<p>An <em><b>ecsComponent</b></em> is what users should sub-class when creating their own components.</p>
<p>Using a database analogy, these would be presented as columns.</p>
<ul>
<li>Components <b>can</b> contain <b>ONLY</b> data</li>
<li>Components <b>cannot</b> contain <b>ANY</b> functions</li>
</ul>
<p>Example: </p><div class="fragment"><div class="line"><span class="keyword">struct </span>TransformComponent final : <span class="keyword">public</span> ecsComponent&lt;TransformComponent&gt; {</div><div class="line">    mat4 transformMatrix;</div><div class="line">    quat orientation</div><div class="line">    vec3 position;</div><div class="line">    vec3 scale;</div><div class="line">    vec3 rotation;</div><div class="line">};</div></div><!-- fragment --><h3>Section 2: ecsEntity</h3>
<p>An <em><b>ecsEntity</b></em> represents a single entity, but requires no further subclassing or modification from the user under an ECS architecture.</p>
<p>All behaviour is expressed in systems responding to the presence or absence of component combinations within an entity.</p>
<p>Using a database analogy, these would be presented as rows.</p>
<ul>
<li>An entity <b>can</b> contain no components</li>
<li>An entity <b>cannot</b> contain two components of the same class type</li>
</ul>
<p>Example:</p>
<p>An entity can be made with a set of components representing a player, such as:</p><ul>
<li>Player component</li>
<li>Character component</li>
<li>Health component</li>
<li>Armor component In a game, this entity could be modified and can add useful gameplay components like:</li>
<li>Invulnerable component or</li>
<li>Poisoned component</li>
</ul>
<h3>Section 3: ecsHandle</h3>
<p>An <em><b>ecsHandle</b></em> is a structure used to uniquely identify entities or components using a 32 character UUID.</p>
<p>The ecsWorld takes care to provide sensible values on behalf othe user when generating entities and components. However, this class on its own should never have to be used by a user.</p>
<p>Instead, when a entity or component is created, its EntityHandle or ComponentHandle will be returned - subclasses of ecsHandle.</p>
<p>Example: </p><div class="fragment"><div class="line"><span class="comment">// Make an entity</span></div><div class="line">EntityHandle entHandle = world.makeEntity(...);</div><div class="line"></div><div class="line"><span class="comment">// Delete an entity</span></div><div class="line"><span class="keywordtype">bool</span> removedSuccesfully = world.removeEntity(entHandle);</div></div><!-- fragment --><h3>Section 4: ecsSystem</h3>
<p>An <em><b>ecsSystem</b></em> provides the logic appropriate to entity-component combinations.</p>
<p>These are set to filter certain combinations of components per-entity, and can also <b>optionally</b> accept components.</p>
<p>In a database analogy, these would be represented as queries.</p>
<p>Example: </p><div class="fragment"><div class="line"><span class="keyword">class </span>GravitySystem final : <span class="keyword">public</span> ecsBaseSystem {</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    GravitySystem() {</div><div class="line">        addComponentType(</div><div class="line">            ParticleComponent::Runtime_ID, RequirementsFlag::FLAG_REQUIRED);</div><div class="line">        addComponentType(</div><div class="line">            MassComponent::Runtime_ID, RequirementsFlag::FLAG_REQUIRED);</div><div class="line">    }</div><div class="line">    </div><div class="line">    <span class="comment">// Interface Implementation</span></div><div class="line">    <span class="comment">// Receives a vector of required components per-entity, nested in another vector</span></div><div class="line">    <span class="keywordtype">void</span> updateComponents(</div><div class="line">        <span class="keyword">const</span> <span class="keywordtype">double</span>&amp; deltaTime,</div><div class="line">        <span class="keyword">const</span> std::vector&lt;std::vector&lt;ecsBaseComponent*&gt;&gt;&amp; entityComponents) </div><div class="line">        <span class="keyword">final</span> {</div><div class="line">        <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; components : entityComponents) {</div><div class="line">            <span class="keyword">auto</span>&amp; particleComponent =</div><div class="line">                *static_cast&lt;ParticleComponent*&gt;(components[0]);</div><div class="line">            <span class="keyword">auto</span>&amp; massComponent = *static_cast&lt;MassComponent*&gt;(components[1]);</div><div class="line"></div><div class="line">            <span class="keyword">const</span> <span class="keywordtype">float</span> force = massComponent.mass * -9.81F;</div><div class="line">            particleComponent.particle.m_velocity.y() +=</div><div class="line">                force * static_cast&lt;float&gt;(deltaTime);</div><div class="line"></div><div class="line">            particleComponent.particle.m_pos +=</div><div class="line">                particleComponent.particle.m_velocity *</div><div class="line">                vec2(static_cast&lt;float&gt;(deltaTime));</div><div class="line">        }</div><div class="line">    }</div><div class="line">};</div></div><!-- fragment --><h3>Section 5: ecsWorld</h3>
<p>An <em><b>ecsWorld</b></em> stores, organizes, and provides means of accessing and manipulating entities and components.</p>
<p>In addition, it facilitates creation of entities and components. It encapsulates the state of a the game-world.</p>
<p>It also provides means for systems to interact with the data within.</p>
<p>In a database analogy, this would be a DBMS (database management system).</p>
<p>Example:</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main()</div><div class="line">{</div><div class="line">    ecsWorld world;</div><div class="line">    </div><div class="line">    <span class="comment">// Create Empty Entity</span></div><div class="line">    EntityHandle entity = world.makeEntity(<span class="keyword">nullptr</span>, 0);</div><div class="line">    </div><div class="line">    <span class="comment">// Create components</span></div><div class="line">    PositionComponent pos{ vec3(0.0F) };</div><div class="line">    ScaleComponent scl{ vec3(1.0F) };</div><div class="line">    QuatComponent quat{ quat(0.0F) };</div><div class="line">    ModelComponent mdl{ Model(<span class="stringliteral">&quot;//Models//Penguin.mdl&quot;</span>) };</div><div class="line">    world.makeComponent(entity, &amp;pos);</div><div class="line">    world.makeComponent(entity, &amp;scl);</div><div class="line">    ComponentHandle quatHandle = world.makeComponent(entity, &amp;quat);</div><div class="line">    ComponentHandle modelHandle = world.makeComponent(entity, &amp;mdl);</div><div class="line"></div><div class="line">    <span class="comment">// Delete component using handles</span></div><div class="line">    world.removeEntityComponent(entity, modelHandle);</div><div class="line">    </div><div class="line">    <span class="comment">// Delete component using 1 handle (slow)</span></div><div class="line">    world.removeComponent(quatHandle);</div><div class="line">    </div><div class="line">    <span class="comment">// Delete component using type</span></div><div class="line">    world.removeEntityComponent(entity, ScaleComponent::Runtime_ID);</div><div class="line">    </div><div class="line">    <span class="comment">// Delete entity and remaining components</span></div><div class="line">    world.removeEntity(entity);</div><div class="line">    </div><div class="line">    PhysicsSystem system;</div><div class="line">    </div><div class="line">    <span class="keywordflow">while</span> (shouldRun())</div><div class="line">    {</div><div class="line">        world.updateSystem(&amp;system, 0.01);</div><div class="line">    }</div><div class="line">}</div><div class="line">};</div></div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
